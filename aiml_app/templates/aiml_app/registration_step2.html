{% extends "aiml_app/base.html" %}

{% block content %}
<div class="container mt-5">
    <h2>Step 2: Registration & Payment</h2>
    <form method="post">
        {% csrf_token %}
        <input type="hidden" name="step" value="2">

        <!-- Personal Info -->
        <h4>Personal Information</h4>
        <div class="mb-3">
            <label>Phone Number</label>
            {{ form.phone_number }}
        </div>
        <div class="mb-3">
            <label>Designation</label>
            {{ form.designation }}
        </div>

        <!-- Organization Info -->
        <h4>Organization Information</h4>
        <div class="mb-3">
            <label>Institution Name</label>
            {{ form.institution_name }}
        </div>
        <div class="mb-3">
            <label>Address</label>
            {{ form.address }}
        </div>
        <div class="mb-3">
            <label>Country</label>
            {{ form.country }}
        </div>

        <!-- Registration Type -->
        <h4>Registration Type</h4>
        <div class="mb-3">
            <label>Type</label>
            {{ form.registration_type }}
        </div>

        <!-- Payment Section -->
        <h4>Payment</h4>
        <div class="mb-3">
            <label>Payment Option</label>
            {{ form.payment_option }}
        </div>
        <div class="mb-3">
            <label>Card Number</label>
            {{ form.card_number }}
        </div>
        <div class="mb-3">
            <label>Expiry Date (MM/YY)</label>
            {{ form.expiry_date }}
        </div>
        <div class="mb-3">
            <label>CVV</label>
            {{ form.cvv }}
        </div>

        <!-- Dynamic Registration Fee -->
        <div class="mb-3">
            <label>Registration Fee</label>
            {{ form.registration_fee }}
        </div>

        <button type="submit" class="btn btn-success">Submit Registration</button>
    </form>
</div>

<script>
    // Dynamic price display
    const registrationPrices = {
        'student_early': 50,
        'student_late': 70,
        'academic_early': 100,
        'academic_late': 130,
        'industry_early': 200,
        'industry_late': 250
    };

    const regTypeSelect = document.querySelector('select[name="registration_type"]');
    const feeInput = document.querySelector('input[name="registration_fee"]');

    regTypeSelect.addEventListener('change', function() {
        const selected = regTypeSelect.value;
        feeInput.value = registrationPrices[selected] || '';
    });

    // Initialize on page load
    feeInput.value = registrationPrices[regTypeSelect.value] || '';
</script>
{% endblock %}
