
<style>
  .progress {
    border-radius: 50px;
    overflow: hidden;
  }
  .progress-bar {
    font-weight: 500;
    font-size: 14px;
    padding: 2px 0;
  }
</style>


{% extends "base.html" %}

{% load widget_tweaks %}

{% block title %}Registration Form{% endblock %}

{% block content %}
<section class="event-agenda py-5">
  <div class="container"> 
    <div class="row justify-content-center"> 
      <div class="col-lg-10">  <div align="center"><h4> Registration Form </h4> </div> <p> </p>
                <!-- Progress Bar -->
        <div class="mb-4">  
          <div class="progress" style="height: 20px;">
            <div class="progress-bar progress-bar-striped bg-primary" role="progressbar"
                 style="width: 33%;" aria-valuenow="33" aria-valuemin="0" aria-valuemax="100">
              Step 1 of 3
            </div>
          </div>
        </div>

     <!-- Card -->
        <div class="card shadow-sm border-0">
          <div class="card-body p-5">
            <h4 class="mb-4 text-primary"><i class="fas fa-user me-2"></i>Step 1: Personal Information</h4>

            <form method="post" id="personal-form" novalidate>
              {% csrf_token %}
              {{ wizard.management_form }}

<div class="row">
  <!-- Full Name -->
  <div class="col-md-6 mb-3">
    {{ form.full_name.label_tag }}
    {% if form.full_name.errors %}
      {{ form.full_name|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.full_name|add_class:"form-control" }}
    {% endif %}
    {% for error in form.full_name.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Email -->
  <div class="col-md-6 mb-3">
    {{ form.email.label_tag }}
    {% if form.email.errors %}
      {{ form.email|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.email|add_class:"form-control" }}
    {% endif %}
    {% for error in form.email.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

               

  <!-- Phone -->
<div class="col-md-6 mb-3">
  {{ form.phone.label_tag }}
  
  {% if form.phone.errors %}
    {{ form.phone|add_class:"form-control is-invalid" }}
  {% else %}
    {{ form.phone|add_class:"form-control" }}
  {% endif %}

  {% for error in form.phone.errors %}
    <div class="invalid-feedback d-block">{{ error }}</div>
  {% endfor %}
</div>


  <!-- Designation -->
  <div class="col-md-6 mb-3">
    {{ form.designation.label_tag }}
    {% if form.designation.errors %}
      {{ form.designation|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.designation|add_class:"form-control" }}
    {% endif %}
    {% for error in form.designation.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Institution -->
  <div class="col-md-6 mb-3">
    {{ form.institution.label_tag }}
    {% if form.institution.errors %}
      {{ form.institution|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.institution|add_class:"form-control" }}
    {% endif %}
    {% for error in form.institution.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Department -->
  <div class="col-md-6 mb-3">
    {{ form.department.label_tag }}
    {% if form.department.errors %}
      {{ form.department|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.department|add_class:"form-control" }}
    {% endif %}
    {% for error in form.department.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Address 1 -->
  <div class="col-md-12 mb-3">
    {{ form.address_1.label_tag }}
    {% if form.address_1.errors %}
      {{ form.address_1|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.address_1|add_class:"form-control" }}
    {% endif %}
    {% for error in form.address_1.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Address 2 (optional) -->
  <div class="col-md-12 mb-3">
    {{ form.address_2.label_tag }}
    {% if form.address_2.errors %}
      {{ form.address_2|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.address_2|add_class:"form-control" }}
    {% endif %}
    {% for error in form.address_2.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- City -->
  <div class="col-md-4 mb-3">
    {{ form.city.label_tag }}
    {% if form.city.errors %}
      {{ form.city|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.city|add_class:"form-control" }}
    {% endif %}
    {% for error in form.city.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- State -->
  <div class="col-md-4 mb-3">
    {{ form.state.label_tag }}
    {% if form.state.errors %}
      {{ form.state|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.state|add_class:"form-control" }}
    {% endif %}
    {% for error in form.state.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Postal Code -->
  <div class="col-md-4 mb-3">
    {{ form.postal_code.label_tag }}
    {% if form.postal_code.errors %}
      {{ form.postal_code|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.postal_code|add_class:"form-control" }}
    {% endif %}
    {% for error in form.postal_code.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>

  <!-- Country -->
  <div class="col-md-6 mb-4">
    {{ form.country.label_tag }}
    {% if form.country.errors %}
      {{ form.country|add_class:"form-control is-invalid" }}
    {% else %}
      {{ form.country|add_class:"form-control" }}
    {% endif %}
    {% for error in form.country.errors %}
      <div class="invalid-feedback d-block">{{ error }}</div>
    {% endfor %}
  </div>
</div>

              <div class="d-grid">
                <button type="submit" class="btn btn-primary btn-lg">
                  Next <i class="fas fa-arrow-right ms-2"></i>
                </button>
              </div>
            </form>

          </div>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}





<!--   

<section class="event-agenda py-5">
    <div class="container">
        
<div class="row justify-content-center">
    <div class="col-md-12">
 
<h4>Step 1: Personal Information</h4>

<form method="post" id="personal-form">
    {% csrf_token %}
    {{ wizard.management_form }}

    <div class="mb-3">
        {{ form.full_name.label_tag }} {{ form.full_name }}
        <div class="text-danger" id="full_name-error"></div>
    </div>

    <div class="mb-3">
        {{ form.email.label_tag }} {{ form.email }}
        <div class="text-danger" id="email-error"></div>
    </div>

    <div class="mb-3">
        {{ form.phone.label_tag }} {{ form.phone }}
        <div class="text-danger" id="phone-error"></div>
    </div>

    <div class="mb-3">
        {{ form.designation.label_tag }} {{ form.designation }}
        <div class="text-danger" id="designation-error"></div>
    </div>

    <div class="mb-3">
        {{ form.institution.label_tag }} {{ form.institution }}
        <div class="text-danger" id="institution-error"></div>
    </div>

    <div class="mb-3">
        {{ form.department.label_tag }} {{ form.department }}
        <div class="text-danger" id="department-error"></div>
    </div>

    <div class="mb-3">
        {{ form.address_1.label_tag }} {{ form.address_1 }}
        <div class="text-danger" id="address_1-error"></div>
    </div>

    <div class="mb-3">
        {{ form.address_2.label_tag }} {{ form.address_2 }}
        <div class="text-danger" id="address_2-error"></div>
    </div>

    <div class="mb-3">
        {{ form.city.label_tag }} {{ form.city }}
        <div class="text-danger" id="city-error"></div>
    </div>

    <div class="mb-3">
        {{ form.state.label_tag }} {{ form.state }}
        <div class="text-danger" id="state-error"></div>
    </div>

    <div class="mb-3">
        {{ form.postal_code.label_tag }} {{ form.postal_code }}
        <div class="text-danger" id="postal_code-error"></div>
    </div>

    <div class="mb-3">
        {{ form.country.label_tag }} {{ form.country }}
        <div class="text-danger" id="country-error"></div>
    </div>

    <button type="submit" class="btn btn-primary">Next</button>
</form>

<script>
document.addEventListener("DOMContentLoaded", function () {
    const emailField = document.getElementById("id_email");
    const phoneField = document.getElementById("id_phone");

    function showError(field, message) {
        let errorSpan = field.parentNode.querySelector(".error-message");
        if (!errorSpan) {
            errorSpan = document.createElement("span");
            errorSpan.className = "error-message text-danger";
            field.parentNode.appendChild(errorSpan);
        }
        errorSpan.innerText = message;
    }

    function clearError(field) {
        let errorSpan = field.parentNode.querySelector(".error-message");
        if (errorSpan) errorSpan.innerText = "";
    }

    // Live email check
    emailField.addEventListener("input", function () {
        const value = emailField.value.trim();
        if (!value) {
            clearError(emailField);
            return;
        }
        fetch(`/aiml_app/check_email/?email=${encodeURIComponent(value)}`)
            .then(response => response.json())
            .then(data => {
                if (data.exists) {
                    showError(emailField, "This email is already registered.");
                } else {
                    clearError(emailField);
                }
            });
    });

    // Live phone validation (only digits)
    phoneField.addEventListener("input", function () {
        const value = phoneField.value.trim();
        if (value && !/^\d+$/.test(value)) {
            showError(phoneField, "Phone number must contain only digits.");
        } else {
            clearError(phoneField);
        }
    });
});
</script>
    </div>
</div>

</div>
</section>
 

  -->






